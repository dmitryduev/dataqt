<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="Dmitry A. Duev">
    <!--<link rel="icon" href="favicon.ico">-->

    <title>Robo-AO data archive</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/bootstrap-magnify.min.css">

    <style>
        body {
            padding-top: 70px;
        }
        .main-container {
            padding: 40px 15px;
            text-align: center;
        }
        .carousel-fade .carousel-inner .item {
            opacity: 0;
            -webkit-transition: opacity 0.5s;
            -moz-transition: opacity 0.5s;
            -o-transition: opacity 0.5s;
            transition: opacity 0.5s;
        }
        .carousel-control {
            background-image: none !important; /* remove background gradients on controls */
        }
        .carousel-fade .carousel-inner .active {
            opacity: 1;
        }
        .carousel-fade .carousel-inner .active.left,
        .carousel-fade .carousel-inner .active.right {
            left: 0;
            opacity: 0;
            z-index: 1;
        }
        .carousel-fade .carousel-inner .next.left,
        .carousel-fade .carousel-inner .prev.right {
            opacity: 1;
        }
        .carousel-fade .carousel-control {
            z-index: 2;
        }
        @media all and (transform-3d), (-webkit-transform-3d) {
            .carousel-fade .carousel-inner > .item.next,
            .carousel-fade .carousel-inner > .item.active.right {
                opacity: 0;
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
            .carousel-fade .carousel-inner > .item.prev,
            .carousel-fade .carousel-inner > .item.active.left {
                opacity: 0;
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
            .carousel-fade .carousel-inner > .item.next.left,
            .carousel-fade .carousel-inner > .item.prev.right,
            .carousel-fade .carousel-inner > .item.active {
                opacity: 1;
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
        }
        #carouselButtons {
            text-align: center;
            cursor: pointer;
        }
        #carousel-play {
            width: 70%;
            margin-top: 75px;
            margin-left: 15%;
            margin-right: auto;
            display: block;
        }
        #carousel-pause {
            width: 100%;
            margin: 75px auto;
            display: none;
        }
        .img-wrapper {
            position: relative;
            display:inline-block;
        }
        .overlay {
            transition: opacity 0.3s ease-out;
            opacity: 0;
            position:absolute;
            top:0;
            left:0;
            width: 100%;
            height: 100%;
            display:inline-block;
            padding:12px;
            font-size:10px;
            text-align:left;
        }

        .img-wrapper:hover .overlay {
            position:absolute;
            top:0;
            left:0;
            opacity: 0.7;
            width: 100%;
            height: 100%;
            display:inline-block;
            background:#ffffff;
            text-align:left;
            color:#111111;
            padding:12px;
            font-size:10px;
        }
    </style>
</head>

<body>

<!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Robo-AO data archive</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <!--<li class="active"><a href="#">Calendar</a></li>-->
                <li><a href="#">Calendar</a></li>
                <li><a href="#">Search</a></li>
                {% if user == 'admin' %}
                    <li><a href="#">Manage reobserving requests</a></li>
                {% endif %}
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                       role="button" aria-haspopup="true" aria-expanded="false">Logged in as
                        <strong><span class="text-info">{{ user }}</span></strong> <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="logout">Log out</a></li>
                    </ul>
                </li>

            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<!-- Main section -->

<!--
<div class="container">
    <h1>Hi {{ user }}</h1><br>
</div>
-->

{% if dates|length > 0 %}
    <div class="container">
        <h2>
            Science data
            <div class="btn-group">
                <button type="button" class="btn btn-info dropdown-toggle"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Toggle view <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Data</a></li>
                    <li><a href="#">Preview</a></li>
                    <li><a href="#">Auxiliary data</a></li>
                </ul>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-primary dropdown-toggle"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Show dates <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="#">This month</a></li>
                    <li><a href="#">Everything</a></li>
                    <li><a href="#">Show calendar</a></li>
                </ul>
            </div>
        </h2>
    </div>
    {% for date in dates %}
        <div class="container">

            <h3>{{ date }}</h3><br>

            <div class="data-tabs">

                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active">
                        <a href="#{{ date }}-data" aria-controls="{ date }}-data"
                           role="tab" data-toggle="tab">Data</a></li>
                    <li role="presentation">
                        <a href="#{{ date }}-preview" aria-controls="{ date }}-preview"
                           role="tab" data-toggle="tab">Preview</a></li>
                    <li role="presentation">
                        <a href="#{{ date }}-auxiliary" aria-controls="{{ date }}-auxiliary"
                           role="tab" data-toggle="tab">Auxiliary data</a></li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="{{ date }}-data">
                        {% for program in programs %}
                            <h4>Program {{ program }}: data access</h4>
                            Master wget-script to fetch all data:
                            <a href="#">program_{{ program }}_{{ date }}.wget.sh</a>
                            <br>
                            Individual bzipped files
                        {% endfor %}
                    </div>
                    <div role="tabpanel" class="tab-pane" id="{{ date }}-preview">
                        {% for program in programs %}
                            <h4>Program {{ program }}: images preview</h4>
                        {% endfor %}
                    </div>
                    <div role="tabpanel" class="tab-pane" id="{{ date }}-auxiliary">
                        <h4>System performance and meteo data</h4>
                    </div>
                </div>

            </div>

        </div>
        <br>
    {% endfor %}
{% else %}
    <div class="container">
        <h1>No science data to show</h1>
    </div>
{% endif %}


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/bootstrap-magnify.js"></script>
<script>
    // for AJAX requests [absolute website's uri]:
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    $('.data-tabs a').click(function (e) {
        e.preventDefault();
        $(this).tab('show')
    })
</script>
</body>
</html>
